---
import Layout from "../../shared/Layout.astro";
import { getCollection } from 'astro:content';
const posts = await getCollection('posts');
const base = import.meta.env.BASE_URL;
---

<Layout title="文章">
  <h1>文章</h1>
  <ul>
    {posts
      .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
      .map(({ slug, data }) => (
        <li>
          <a href={`${base}posts/${slug}/`}>{data.title}</a>
          <small style="opacity:.7; margin-left:.5rem">{new Date(data.date).toLocaleDateString('zh-CN')}</small>
        </li>
      ))}
  </ul>
</Layout>